# TestAlente

Технологии и требования:
```
Python 3.9+
Django
Django REST Framework
Poetry
```

Запуск проекта
```
1) Скачать проект с гитхаб
2) Создаем в корне .env и добавляем в него следующие данные:

DB_NAME=     
POSTGRES_USER=      
POSTGRES_PASSWORD=      
DB_HOST=db
DB_PORT=5432
DJANGO_SECRET_KEY=
EMAIL_HOST=
EMAIL_PORT==587
EMAIL_HOST_USER=
EMAIL_HOST_PASSWORD=


3) Разворачиваем и запускаем проект:
- docker compose up
- docker-compose exec web python manage.py migrate --noinput   # применяем миграции
- docker-compose exec web python manage.py createsuperuser     # создаем суперпользователя
- docker-compose exec web python manage.py collectstatic --no-input     # собираем статику
```

Подробнее о проекте:
```
Существуют 2 типа пользователей: модератор и не модератор (поле is_moderator). 
По-умолчанию через api создается не модератор. 
Модератор создается только через manage.py createsuperuser. 

Модератор:
- может создавать события. 
- удалять и изменять свои события.
- может видеть все события
- может меня данные других пользователей и свои, в том числе поле 
  "is_moderator", удалять пользователей
- может увидеть всех участников своего события при запросе данных для 
  конкретного события,
- может видеть отзывы на события
- не может подписываться на события,
- не может оставлять отзывы к событиям,
- не может менять отзывы

Не модератор:
- может менять любые свои данные, кроме "is_moderator"
- может увидеть список событий
- может регистрироваться на события, 
- может оставить 1 отзыв к уже прошедшему событию, на которое он был зарегистрирован
- может видеть список событий, на которые он зарегистрирован,
- может видеть отзывы на события
- не может видеть участников событий
- не может создавать события
```

Автодокументация
```
http://127.0.0.1/api/schema/redoc/
```

Тесты
```
- docker-compose exec pytest
```
Тесты можно запустить локально без docker, для этого необходимо создать
и активировать venv с помощью [документация с информацией по установке 
poetry](https://python-poetry.org/docs/cli/):
```
- python -m venv venv
- source venv/bin/activate
- poetry install
- pytest
```